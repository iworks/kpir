/*! KsiÄ™ga Przychodi i Rozchodu - v1.0.1
 * http://iworks.pl/
 * Copyright (c) 2024; * Licensed GPL-3.0 */

jQuery(document).ready(function(a){a(function(){a(".iworks-kpir-row .datepicker").datepicker({showOtherMonths:!0,selectOtherMonths:!0,dateFormat:"dd-mm-yy"})})});var iWorksKPiR={};!function(a){iWorksKPiR.ShowMetaBoxes=function(){var b=a("#basic .iworks-kpir-row-type input[type=radio]:checked").val();a(".iworks-type").addClass("closed").hide(),a("body").removeClass("kpir-not-set"),a(".iworks-type").each(function(){a("body").removeClass(a(this).attr("id"))}),void 0===b?a("body").addClass("kpir-not-set"):(a("#"+b).removeClass("closed").show(),a("body").addClass(b),a("#asset-"+b).prop("checked",!0),"salary"===b&&(a("#asset-expense").prop("checked",!0),a("#expense").removeClass("closed").show()))},iWorksKPiR.BindDuplicate=function(){a(".duplicate-invoice-link").on("click",function(b){var c;b.stopImmediatePropagation(),b.preventDefault();var d=a(this),e=d.parents("tr").first();window.confirm(iworks_kpir.messages.duplicate_confirm)&&(c={action:"kpir_duplicate_invoice",nonce:a(this).attr("data-nonce"),ID:a(this).attr("data-id")},e.addClass("duplicating"),jQuery.post(ajaxurl,c,function(b){b.success?window.location.reload():(html='<div class="notice notice-error"><p>'+iworks_kpir.messages.duplicate_error+"</p></div>",a(".wp-header-end").after(html))}))})},iWorksKPiR.CopyDateOfIssueToEventDate=function(){jQuery("#iworks_kpir_basic_date").val(jQuery("#iworks_kpir_basic_date_of_issue").val())},a(document).ready(iWorksKPiR.ShowMetaBoxes).ready(iWorksKPiR.BindDuplicate).on("change","#basic .iworks-kpir-row-type input[type=radio]",iWorksKPiR.ShowMetaBoxes).on("click","#basic #kpir-copy-date-button",iWorksKPiR.CopyDateOfIssueToEventDate)}(jQuery),function(a){iWorksKPiR.JPK_VAT=function(){var b=a("form#kpir-jpk-vat-3");if("-"==a('select[name="m"]',b).val())return alert(iworks_kpir.messages.jpk.vat.select_month),!1},a(document).on("submit","form#kpir-jpk-vat-3",iWorksKPiR.JPK_VAT)}(jQuery),jQuery(document).ready(function(a){function b(a){if(a.loading)return a.text;var b="<div class='select2-result-contractor clearfix'><div class='select2-result-contractor__meta'><div class='select2-result-contractor__title'>"+a.full_name+"</div>";return a.description&&(b+="<div class='select2-result-contractor__description'>"+a.description+"</div>"),a.nip&&(b+="<div class='select2-result-contractor__nip'>"+a.nip+"</div>"),b+="</div></div>"}function c(a){return a.full_name||a.text}a("select[name=contractor]").select2(),a(".iworks-kpir-row .select2").select2({ajax:{url:ajaxurl,dataType:"json",delay:250,data:function(b){return{q:b.term,page:b.page,action:"iworks_get_contractors",_wpnonce:a(this).data("nonce")}},processResults:function(a,b){return b.page=b.page||1,{results:a.items,pagination:{more:30*b.page<a.total_count}}},cache:!0},escapeMarkup:function(a){return a},minimumInputLength:1,templateResult:b,templateSelection:c})});